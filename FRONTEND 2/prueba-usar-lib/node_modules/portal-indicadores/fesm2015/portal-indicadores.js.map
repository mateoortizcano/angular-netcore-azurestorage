{"version":3,"file":"portal-indicadores.js","sources":["ng://portal-indicadores/lib/services/datos-graficas.service.ts","ng://portal-indicadores/lib/grafica/grafica.component.ts","ng://portal-indicadores/lib/portal-indicadores.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { DatosGrafica } from '../entities/grafica';\nimport { Observable } from 'rxjs';\n\nconst apiUrl = 'https://serviciosfacturacion.xm.com.co/XM.Portal.Indicadores/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DatosGraficasService {\n\n  constructor(private http: HttpClient) { }\n\n  obtenerDatosGraficaAportesHidricos(resolucion: string) {\n    return this.http.get<DatosGrafica>(`${apiUrl}/Oferta/AportesHidricos/${resolucion}`);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ChartDataSets } from 'chart.js';\nimport { Label, Color } from 'ng2-charts';\nimport { DatePipe } from '@angular/common';\nimport { DatosGraficasService } from '../services/datos-graficas.service';\n\n@Component({\n  selector: 'lib-grafica',\n  templateUrl: './grafica.component.html',\n  styleUrls: ['./grafica.component.css']\n})\nexport class GraficaComponent implements OnInit {\n  nombreGrafica = '';\n  tipoGrafica = 'line';\n  lineChartLabels: Label[] = [];\n  nombreEjeY = 'GWh';\n  datosGrafica: ChartDataSets[] = [\n    { data: [], label: 'Caudal', lineTension: 0, borderWidth: 2, fill: false, pointRadius: 0, pointHitRadius: 5 },\n    { data: [], label: 'Media histÃ³tica', lineTension: 0, borderWidth: 2, fill: false, pointRadius: 0, pointHitRadius: 5 }\n  ];\n  coloresGrafica: Color[] = [\n    {\n      borderColor: '#FF6A13',\n      pointBorderColor: '#FF6A13',\n      pointBackgroundColor: '#FF6A13',\n    },\n    {\n      borderColor: '#440099',\n      pointBorderColor: '#440099',\n      pointBackgroundColor: '#440099',\n    },\n    // OTROS COLORES XM #FFC600 #00966C #2AD2C9 #AC145A #75787B\n  ];\n\n  opcionesGrafica = {\n    responsive: true,\n    scales: {\n      xAxes: [{\n        gridLines: {\n          lineWidth: 0,\n          zeroLineWidth: 1\n        },\n        ticks: {\n          maxTicksLimit: 13\n        }\n      }],\n      yAxes: [{\n        gridLines: {\n          lineWidth: 0,\n          zeroLineWidth: 1\n        },\n        scaleLabel: {\n          display: false,\n          labelString: this.nombreEjeY,\n        },\n        ticks: {\n          beginAtZero: true\n        }\n      }]\n    }\n  };\n  lineChartLegend = true;\n  lineChartPlugins = [];\n\n  resolucion = 'dia';\n\n  constructor(private servicioDatosGrafica: DatosGraficasService, private datePipe: DatePipe) { }\n  ngOnInit() {\n    this.consultarDatosGraficas(this.resolucion);\n  }\n\n  private consultarDatosGraficas(resolucion: string) {\n    let valoresGrafica = [];\n    let valoresEjeX = [];\n    let valoresGrafica2 = [];\n    this.servicioDatosGrafica.obtenerDatosGraficaAportesHidricos(resolucion)\n      .subscribe(datosGrafica => {\n        this.nombreGrafica = datosGrafica.Nombre;\n        this.nombreEjeY = datosGrafica.Variables[0].UnidadMedida;\n        datosGrafica.Variables[0].Datos.forEach(dato => {\n          valoresGrafica.unshift(dato.Valor);\n          valoresEjeX.unshift(this.datePipe.transform(dato.Fecha, 'dd/MMM/yyyy', 'UTC-5', 'es-CO'));\n        });\n        datosGrafica.Variables[1].Datos.forEach(dato => {\n          valoresGrafica2.unshift(dato.Valor);\n        });\n        this.lineChartLabels = valoresEjeX;\n        this.datosGrafica[0].data = valoresGrafica;\n        this.datosGrafica[1].data = valoresGrafica2;\n      });\n  }\n\n  cambiarResolucion(event) {\n    this.consultarDatosGraficas(event.target.value);\n  }\n}\n","import { LOCALE_ID, NgModule } from '@angular/core';\nimport { GraficaComponent } from './grafica/grafica.component';\nimport { ChartsModule, ThemeService } from 'ng2-charts';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { registerLocaleData } from '@angular/common';\nimport localeCo from '@angular/common/locales/es-CO';\nimport { HttpClientModule } from '@angular/common/http';\n\nregisterLocaleData(localeCo, 'es-Co');\n\n@NgModule({\n  declarations: [GraficaComponent],\n  imports: [\n    CommonModule,\n    ChartsModule,\n    HttpClientModule\n\n  ],\n  exports: [GraficaComponent],\n  providers: [ThemeService, DatePipe, { provide: LOCALE_ID, useValue: 'es-Co' }],\n})\nexport class PortalIndicadoresModule { }\n"],"names":[],"mappings":"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"}
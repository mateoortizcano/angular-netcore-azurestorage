{"version":3,"sources":["ng://portal-indicadores/lib/services/datos-graficas.service.ts","ng://portal-indicadores/lib/grafica/grafica.component.ts","ng://portal-indicadores/lib/portal-indicadores.module.ts"],"names":["DatosGraficasService","http","this","prototype","obtenerDatosGraficaAportesHidricos","resolucion","get","apiUrl","Injectable","args","providedIn","HttpClient","GraficaComponent","servicioDatosGrafica","datePipe","nombreGrafica","tipoGrafica","lineChartLabels","nombreEjeY","datosGrafica","data","label","lineTension","borderWidth","fill","pointRadius","pointHitRadius","coloresGrafica","borderColor","pointBorderColor","pointBackgroundColor","opcionesGrafica","responsive","scales","xAxes","gridLines","lineWidth","zeroLineWidth","ticks","maxTicksLimit","yAxes","scaleLabel","display","labelString","beginAtZero","lineChartLegend","lineChartPlugins","ngOnInit","consultarDatosGraficas","_this","valoresGrafica","valoresEjeX","valoresGrafica2","subscribe","Nombre","Variables","UnidadMedida","Datos","forEach","dato","unshift","Valor","transform","Fecha","cambiarResolucion","event","target","value","Component","selector","template","DatePipe","registerLocaleData","localeCo","PortalIndicadoresModule","NgModule","declarations","imports","CommonModule","ChartsModule","HttpClientModule","exports","providers","ThemeService","provide","LOCALE_ID","useValue"],"mappings":"4mBAOAA,EAAA,WAKE,SAAAA,EAAoBC,GAAAC,KAAAD,KAAAA,SAEpBD,EAAAG,UAAAC,mCAAA,SAAmCC,GACjC,OAAOH,KAAKD,KAAKK,IAAqBC,2FAAiCF,wBAR1EG,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,oDAPLC,EAAAA,+IAMT,GCPA,IAAAC,EAAA,WAkEE,SAAAA,EAAoBC,EAAoDC,GAApDZ,KAAAW,qBAAAA,EAAoDX,KAAAY,SAAAA,EAtDxEZ,KAAAa,cAAgB,GAChBb,KAAAc,YAAc,OACdd,KAAAe,gBAA2B,GAC3Bf,KAAAgB,WAAa,MACbhB,KAAAiB,aAAgC,CAC9B,CAAEC,KAAM,GAAIC,MAAO,SAAUC,YAAa,EAAGC,YAAa,EAAGC,MAAM,EAAOC,YAAa,EAAGC,eAAgB,GAC1G,CAAEN,KAAM,GAAIC,MAAO,kBAAmBC,YAAa,EAAGC,YAAa,EAAGC,MAAM,EAAOC,YAAa,EAAGC,eAAgB,IAErHxB,KAAAyB,eAA0B,CACxB,CACEC,YAAa,UACbC,iBAAkB,UAClBC,qBAAsB,WAExB,CACEF,YAAa,UACbC,iBAAkB,UAClBC,qBAAsB,YAK1B5B,KAAA6B,gBAAkB,CAChBC,YAAY,EACZC,OAAQ,CACNC,MAAO,CAAC,CACNC,UAAW,CACTC,UAAW,EACXC,cAAe,GAEjBC,MAAO,CACLC,cAAe,MAGnBC,MAAO,CAAC,CACNL,UAAW,CACTC,UAAW,EACXC,cAAe,GAEjBI,WAAY,CACVC,SAAS,EACTC,YAAazC,KAAKgB,YAEpBoB,MAAO,CACLM,aAAa,OAKrB1C,KAAA2C,iBAAkB,EAClB3C,KAAA4C,iBAAmB,GAEnB5C,KAAAG,WAAa,MA+Bf,OA5BEO,EAAAT,UAAA4C,SAAA,WACE7C,KAAK8C,uBAAuB9C,KAAKG,aAG3BO,EAAAT,UAAA6C,uBAAR,SAA+B3C,GAA/B,IAAA4C,EAAA/C,KACMgD,EAAiB,GACjBC,EAAc,GACdC,EAAkB,GACtBlD,KAAKW,qBAAqBT,mCAAmCC,GAC1DgD,WAAS,SAAClC,GACT8B,EAAKlC,cAAgBI,EAAamC,OAClCL,EAAK/B,WAAaC,EAAaoC,UAAU,GAAGC,aAC5CrC,EAAaoC,UAAU,GAAGE,MAAMC,SAAO,SAACC,GACtCT,EAAeU,QAAQD,EAAKE,OAC5BV,EAAYS,QAAQX,EAAKnC,SAASgD,UAAUH,EAAKI,MAAO,cAAe,QAAS,aAElF5C,EAAaoC,UAAU,GAAGE,MAAMC,SAAO,SAACC,GACtCP,EAAgBQ,QAAQD,EAAKE,UAE/BZ,EAAKhC,gBAAkBkC,EACvBF,EAAK9B,aAAa,GAAGC,KAAO8B,EAC5BD,EAAK9B,aAAa,GAAGC,KAAOgC,MAIlCxC,EAAAT,UAAA6D,kBAAA,SAAkBC,GAChB/D,KAAK8C,uBAAuBiB,EAAMC,OAAOC,4BAvF5CC,EAAAA,UAAS3D,KAAA,CAAC,CACT4D,SAAU,cACVC,SAAA,g3BAJOtE,SADAuE,EAAAA,YA4FT3D,EA/FA,GCQA4D,EAAAA,mBAAmBC,EAAU,SAE7B,IAAAC,EAAA,WAAA,SAAAA,KAWuC,2BAXtCC,EAAAA,SAAQlE,KAAA,CAAC,CACRmE,aAAc,CAAChE,GACfiE,QAAS,CACPC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,kBAGFC,QAAS,CAACrE,GACVsE,UAAW,CAACC,EAAAA,aAAcZ,EAAAA,SAAU,CAAEa,QAASC,EAAAA,UAAWC,SAAU,cAE/BZ,EAXvC","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { DatosGrafica } from '../entities/grafica';\nimport { Observable } from 'rxjs';\n\nconst apiUrl = 'https://serviciosfacturacion.xm.com.co/XM.Portal.Indicadores/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DatosGraficasService {\n\n  constructor(private http: HttpClient) { }\n\n  obtenerDatosGraficaAportesHidricos(resolucion: string) {\n    return this.http.get<DatosGrafica>(`${apiUrl}/Oferta/AportesHidricos/${resolucion}`);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ChartDataSets } from 'chart.js';\nimport { Label, Color } from 'ng2-charts';\nimport { DatePipe } from '@angular/common';\nimport { DatosGraficasService } from '../services/datos-graficas.service';\n\n@Component({\n  selector: 'lib-grafica',\n  templateUrl: './grafica.component.html',\n  styleUrls: ['./grafica.component.css']\n})\nexport class GraficaComponent implements OnInit {\n  nombreGrafica = '';\n  tipoGrafica = 'line';\n  lineChartLabels: Label[] = [];\n  nombreEjeY = 'GWh';\n  datosGrafica: ChartDataSets[] = [\n    { data: [], label: 'Caudal', lineTension: 0, borderWidth: 2, fill: false, pointRadius: 0, pointHitRadius: 5 },\n    { data: [], label: 'Media histÃ³tica', lineTension: 0, borderWidth: 2, fill: false, pointRadius: 0, pointHitRadius: 5 }\n  ];\n  coloresGrafica: Color[] = [\n    {\n      borderColor: '#FF6A13',\n      pointBorderColor: '#FF6A13',\n      pointBackgroundColor: '#FF6A13',\n    },\n    {\n      borderColor: '#440099',\n      pointBorderColor: '#440099',\n      pointBackgroundColor: '#440099',\n    },\n    // OTROS COLORES XM #FFC600 #00966C #2AD2C9 #AC145A #75787B\n  ];\n\n  opcionesGrafica = {\n    responsive: true,\n    scales: {\n      xAxes: [{\n        gridLines: {\n          lineWidth: 0,\n          zeroLineWidth: 1\n        },\n        ticks: {\n          maxTicksLimit: 13\n        }\n      }],\n      yAxes: [{\n        gridLines: {\n          lineWidth: 0,\n          zeroLineWidth: 1\n        },\n        scaleLabel: {\n          display: false,\n          labelString: this.nombreEjeY,\n        },\n        ticks: {\n          beginAtZero: true\n        }\n      }]\n    }\n  };\n  lineChartLegend = true;\n  lineChartPlugins = [];\n\n  resolucion = 'dia';\n\n  constructor(private servicioDatosGrafica: DatosGraficasService, private datePipe: DatePipe) { }\n  ngOnInit() {\n    this.consultarDatosGraficas(this.resolucion);\n  }\n\n  private consultarDatosGraficas(resolucion: string) {\n    let valoresGrafica = [];\n    let valoresEjeX = [];\n    let valoresGrafica2 = [];\n    this.servicioDatosGrafica.obtenerDatosGraficaAportesHidricos(resolucion)\n      .subscribe(datosGrafica => {\n        this.nombreGrafica = datosGrafica.Nombre;\n        this.nombreEjeY = datosGrafica.Variables[0].UnidadMedida;\n        datosGrafica.Variables[0].Datos.forEach(dato => {\n          valoresGrafica.unshift(dato.Valor);\n          valoresEjeX.unshift(this.datePipe.transform(dato.Fecha, 'dd/MMM/yyyy', 'UTC-5', 'es-CO'));\n        });\n        datosGrafica.Variables[1].Datos.forEach(dato => {\n          valoresGrafica2.unshift(dato.Valor);\n        });\n        this.lineChartLabels = valoresEjeX;\n        this.datosGrafica[0].data = valoresGrafica;\n        this.datosGrafica[1].data = valoresGrafica2;\n      });\n  }\n\n  cambiarResolucion(event) {\n    this.consultarDatosGraficas(event.target.value);\n  }\n}\n","import { LOCALE_ID, NgModule } from '@angular/core';\nimport { GraficaComponent } from './grafica/grafica.component';\nimport { ChartsModule, ThemeService } from 'ng2-charts';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { registerLocaleData } from '@angular/common';\nimport localeCo from '@angular/common/locales/es-CO';\nimport { HttpClientModule } from '@angular/common/http';\n\nregisterLocaleData(localeCo, 'es-Co');\n\n@NgModule({\n  declarations: [GraficaComponent],\n  imports: [\n    CommonModule,\n    ChartsModule,\n    HttpClientModule\n\n  ],\n  exports: [GraficaComponent],\n  providers: [ThemeService, DatePipe, { provide: LOCALE_ID, useValue: 'es-Co' }],\n})\nexport class PortalIndicadoresModule { }\n"]}
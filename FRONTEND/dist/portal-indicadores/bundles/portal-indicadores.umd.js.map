{"version":3,"file":"portal-indicadores.umd.js","sources":["ng://portal-indicadores/lib/services/datos-graficas.service.ts","ng://portal-indicadores/lib/grafica/grafica.component.ts","ng://portal-indicadores/lib/portal-indicadores.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { DatosGrafica } from '../entities/grafica';\nimport { Observable } from 'rxjs';\n\nconst apiUrl = 'https://serviciosfacturacion.xm.com.co/XM.Portal.Indicadores/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DatosGraficasService {\n\n  constructor(private http: HttpClient) { }\n\n  obtenerDatosGraficaAportesHidricos(resolucion: string) {\n    return this.http.get<DatosGrafica>(`${apiUrl}/Oferta/AportesHidricos/${resolucion}`);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ChartDataSets } from 'chart.js';\nimport { Label, Color } from 'ng2-charts';\nimport { DatePipe } from '@angular/common';\nimport { DatosGraficasService } from '../services/datos-graficas.service';\n\n@Component({\n  selector: 'lib-grafica',\n  templateUrl: './grafica.component.html',\n  styleUrls: ['./grafica.component.css']\n})\nexport class GraficaComponent implements OnInit {\n  nombreGrafica = '';\n  tipoGrafica = 'line';\n  lineChartLabels: Label[] = [];\n  nombreEjeY = 'GWh';\n  datosGrafica: ChartDataSets[] = [\n    { data: [], label: 'Caudal', lineTension: 0, borderWidth: 2, fill: false, pointRadius: 0, pointHitRadius: 5 },\n    { data: [], label: 'Media histÃ³tica', lineTension: 0, borderWidth: 2, fill: false, pointRadius: 0, pointHitRadius: 5 }\n  ];\n  coloresGrafica: Color[] = [\n    {\n      borderColor: '#FF6A13',\n      pointBorderColor: '#FF6A13',\n      pointBackgroundColor: '#FF6A13',\n    },\n    {\n      borderColor: '#440099',\n      pointBorderColor: '#440099',\n      pointBackgroundColor: '#440099',\n    },\n    // OTROS COLORES XM #FFC600 #00966C #2AD2C9 #AC145A #75787B\n  ];\n\n  opcionesGrafica = {\n    responsive: true,\n    scales: {\n      xAxes: [{\n        gridLines: {\n          lineWidth: 0,\n          zeroLineWidth: 1\n        },\n        ticks: {\n          maxTicksLimit: 13\n        }\n      }],\n      yAxes: [{\n        gridLines: {\n          lineWidth: 0,\n          zeroLineWidth: 1\n        },\n        scaleLabel: {\n          display: false,\n          labelString: this.nombreEjeY,\n        },\n        ticks: {\n          beginAtZero: true\n        }\n      }]\n    }\n  };\n  lineChartLegend = true;\n  lineChartPlugins = [];\n\n  resolucion = 'dia';\n\n  constructor(private servicioDatosGrafica: DatosGraficasService, private datePipe: DatePipe) { }\n  ngOnInit() {\n    this.consultarDatosGraficas(this.resolucion);\n  }\n\n  private consultarDatosGraficas(resolucion: string) {\n    let valoresGrafica = [];\n    let valoresEjeX = [];\n    let valoresGrafica2 = [];\n    this.servicioDatosGrafica.obtenerDatosGraficaAportesHidricos(resolucion)\n      .subscribe(datosGrafica => {\n        this.nombreGrafica = datosGrafica.Nombre;\n        this.nombreEjeY = datosGrafica.Variables[0].UnidadMedida;\n        datosGrafica.Variables[0].Datos.forEach(dato => {\n          valoresGrafica.unshift(dato.Valor);\n          valoresEjeX.unshift(this.datePipe.transform(dato.Fecha, 'dd/MMM/yyyy', 'UTC-5', 'es-CO'));\n        });\n        datosGrafica.Variables[1].Datos.forEach(dato => {\n          valoresGrafica2.unshift(dato.Valor);\n        });\n        this.lineChartLabels = valoresEjeX;\n        this.datosGrafica[0].data = valoresGrafica;\n        this.datosGrafica[1].data = valoresGrafica2;\n      });\n  }\n\n  cambiarResolucion(event) {\n    this.consultarDatosGraficas(event.target.value);\n  }\n}\n","import { LOCALE_ID, NgModule } from '@angular/core';\nimport { GraficaComponent } from './grafica/grafica.component';\nimport { ChartsModule, ThemeService } from 'ng2-charts';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { registerLocaleData } from '@angular/common';\nimport localeCo from '@angular/common/locales/es-CO';\nimport { HttpClientModule } from '@angular/common/http';\n\nregisterLocaleData(localeCo, 'es-Co');\n\n@NgModule({\n  declarations: [GraficaComponent],\n  imports: [\n    CommonModule,\n    ChartsModule,\n    HttpClientModule\n\n  ],\n  exports: [GraficaComponent],\n  providers: [ThemeService, DatePipe, { provide: LOCALE_ID, useValue: 'es-Co' }],\n})\nexport class PortalIndicadoresModule { }\n"],"names":["Injectable","HttpClient","Component","DatePipe","registerLocaleData","NgModule","CommonModule","ChartsModule","HttpClientModule","ThemeService","LOCALE_ID"],"mappings":"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"}